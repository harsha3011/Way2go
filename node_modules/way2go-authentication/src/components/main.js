
//This component handles the App template used on every page          

import React from 'react';
import { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom';


import Routes from './routes';
import '../css/style.scss';
import { IntlProvider, addLocaleData } from 'react-intl';
import fr from 'react-intl/locale-data/fr';
import en from 'react-intl/locale-data/en';
import {Storage} from 'way2go-common';

const locale = Storage().getValue(Storage().options.LOCALE);

/* start for i18n - translations */
let localizedMessages={};
try{
  localizedMessages = require('../translations/'+locale+'.json');
}
catch(err){
  console.log("supported translation file not found", err);
}
addLocaleData([...en,...fr]);
/* end for i18n - translations */

const Main = () => (
  <IntlProvider locale={locale} messages={localizedMessages}>
  <main id="authentication">
    <Switch>
      {routes}
    </Switch>
  </main>
  </IntlProvider>
);

let routes = [];
for (let index = 0; index < Routes.length; index++) {
  routes.push(<Route key={index} exact path={Routes[index].path} component={Routes[index].component} />);
}

// function PrivateRoute ({component: Component, authed}) {
//   return (
//     <Route
//       render={(props) => authed === true
//         ? <Component {...props} />
//         : <Redirect to={{pathname: '/login', state: {from: props.location}}} />}
//     />
//   )
// }

export default Main;
